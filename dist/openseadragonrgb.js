!function(e){"use strict";function t(e){this.onCanvasHover(this.getValueAt(e.position))}if(!e.version||e.version.major<2)throw new Error("This version of OpenSeadragonRGB requires OpenSeadragon version 2.0.0+");e.Viewer.prototype.rgb=function(t){return this.rgbInstance&&!t||(t=t||{},t.viewer=this,this.rgbInstance=new e.RGB(t)),this.rgbInstance},e.RGB=function(r){e.extend(!0,this,{viewer:null,onCanvasHover:null,sampleSize:1},r),this.onCanvasHover&&(this.tracker=new e.MouseTracker({element:this.viewer.canvas,moveHandler:e.delegate(this,t)}))},e.extend(e.RGB.prototype,{getValueAt:function(t,r){for(var n=1===arguments.length?t:new e.Point(t,r),o=this.viewer,i=[],a=0;a<o.world.getItemCount();a++)i.push(o.world.getItemAt(a));for(var s=o.drawer.getImageOfPoint(n,i),g=o.drawer.getRgbAt(n),v=[],u=[],h=[],l=[],p=0;p<g.length;p+=4)v.push(g[p]),u.push(g[p+1]),h.push(g[p+2]),l.push(g[p+3]);var w=function(e){e.sort(function(e,t){return e-t});var t=e[Math.floor(e.length/2)];return t},f={r:w(v),g:w(u),b:w(h),a:w(l)};return s&&(f.image=s,f.imageCoordinates=n),f}}),e.Drawer.prototype.getImageOfPoint=function(t,r){for(var n,o=0;o<r.length;o++){var i,a=r[o].getContentSize();i=e.TiledImage.prototype.viewerElementToImageCoordinates?r[o].viewerElementToImageCoordinates(t):this.viewer.viewport.viewerElementToImageCoordinates(t);var s=i.x>=0&&i.y>=0;if(s=s&&i.x<=a.x&&i.y<=a.y){n=r[o];break}}return n},e.Drawer.prototype.getRgbAt=function(t){if(!this.useCanvas)return!1;var r=this.viewer.rgbInstance.sampleSize,n=(r-1)/2,o=e.pixelDensityRatio,i=t.x*o-n,a=t.y*o-n,s=this._getContext(),g=s.getImageData(i,a,r,r).data;return g}}(OpenSeadragon);
//# sourceMappingURL=openseadragonrgb.js.map
